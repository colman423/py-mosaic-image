<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <link href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.3/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-Zug+QiDoJOrZ5t4lssLdxGhVrurbmBWopoEl+M6BdEfwnCJZtKxi1KgxUyJq13dy" crossorigin="anonymous">
        <title>I come from template!!</title>
        <style>
            body {
               background-color: lightyellow;
            }
            em {
                color: LightSeaGreen;
            }
        </style>
    </head>
    <body>
        <h1>Hello World!</h1>
        <div class="container">
            <div class="row form-group">
                <label for="file">上傳檔案</label>
            </div>
            <div class="row form-group">
                <input id="file" class="" type="file" name="file">
            </div>
            <div class="row form-group">
                <input id="submit" type="button" class="btn btn-primary" value="進入網站">
            </div>
        </div>
        <p id="result"></p>
        {% load staticfiles %}
        {% load socketio_tags %}
        {% socketio %}
        <script type="text/javascript" src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
        <script type="text/javascript">
            $(function() {
                var socket = new io.Socket();
                socket.connect();
                socket.on('connect', function() {
                    console.log("con!");
                    socket.subscribe('notification');
                })
                socket.on('message',countNewMessage);
                socket.send({'id': 1});

                var countNewMessage = function(data) {
                    console.log(data.id);
                };
                $('#submit').on('click', function() {
                    console.log("submit click!");
                    $.ajax({
                        'type': "POST",
                        'url': "/",
                        'data': {
                            'file': $('#file').val()
                        },
                        'success': function(res) {
                            console.log(res);
                            if( res ) {
                                console.log("image");
                            }
                            else {
                            }

                        }
                    });
                });
            });
        </script>
    </body>
</html>
